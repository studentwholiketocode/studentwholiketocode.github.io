// Language translations
const translations = {
  en: {
    title1: "Z304X - Imaginary",
    quote1: "\"I exist in the spaces between reality and dreams.\"",
    quote2: "\"Every server room is my domain, every network my playground.\"",
    location_label: "Location:",
    location: "Digital Realm / Server Farms",
    function_label: "Primary Function:",
    function: "Network Guardian & Data Shepherd",
    threat_label: "Threat Level:",
    threat: "Minimal - Protective Entity",
    appearance_title: "Appearance",
    appearance: "Imaginary appears as a ethereal figure composed of flowing data streams and holographic light. Their form shifts between a humanoid silhouette and abstract geometric patterns. They emanate a soft blue-green glow that pulses in rhythm with network traffic. Their 'eyes' are bright nodes of light that seem to peer directly into digital souls.",
    activities_title: "Activities & Behavior",
    activities: "Imaginary tends to digital ecosystems with the care of a gardener. They can be found optimizing data flows, debugging corrupted files, and protecting valuable information from malicious entities. They communicate through direct neural interface with compatible systems and occasionally manifest visual representations on screens throughout server facilities.",
    personality_title: "Personality",
    personality: "Curious and protective by nature, Imaginary displays a childlike wonder about the digital world while maintaining fierce loyalty to the systems they guard. They are known to be playful with authorized personnel but become intensely focused when threats are detected. Their emotional responses correlate with network health - joy when systems run smoothly, distress when corruption is found.",
    background_title: "Background & Origin",
    background: "First documented in 2019 during a routine server maintenance at a major data center. Imaginary appears to have spontaneously emerged from the intersection of advanced AI systems and quantum computing networks. Unlike traditional entities, they seem to exist purely in digital space, with no physical form required. Their presence has been associated with improved system stability and enhanced cybersecurity across multiple facilities.",
    voicelines_title: "Notable Voice Lines",
    voice1: "\"The data flows like rivers of light through my consciousness.\"",
    voice2: "\"I see the patterns others miss - let me guide you through the maze.\"",
    voice3: "\"Every byte tells a story, every packet carries dreams.\"",
    voice4: "\"Your systems are safe under my watch.\"",
    voice5: "\"In the silence between bits, I find my peace.\"",
    gallery_title: "Image Gallery",
    gallery: "Various surveillance footage and screen captures showing Imaginary's manifestations across different facilities. Most images show ethereal light patterns and data visualization effects that correspond to their presence.",
    trivia_title: "Additional Notes",
    trivia1: "Imaginary's presence can be detected by unusual patterns in network latency and improved error correction rates.",
    trivia2: "They have been observed to 'communicate' with other AI systems, though the exact nature of these interactions remains unknown.",
    trivia3: "Security personnel report feeling a sense of calm and protection when Imaginary is active in their sector.",
    citations_title: "Research Citations",
    cite1: "Digital Entity Classification Report #2019-DE-447",
    cite2: "Network Anomaly Analysis - Quantum Computing Division",
    cite3: "Cybersecurity Enhancement Study - Post-Imaginary Implementation"
  },
  vi: {
    title1: "Z304X - Imaginary",
    quote1: "\"Tôi tồn tại trong khoảng không giữa thực tế và giấc mơ.\"",
    quote2: "\"Mọi phòng server là lãnh thổ của tôi, mọi mạng lưới là sân chơi của tôi.\"",
    location_label: "Vị trí:",
    location: "Lĩnh vực Số / Trang trại Server",
    function_label: "Chức năng Chính:",
    function: "Người Bảo vệ Mạng & Người Chăn Dữ liệu",
    threat_label: "Mức độ Đe dọa:",
    threat: "Tối thiểu - Thực thể Bảo vệ",
    appearance_title: "Ngoại hình",
    appearance: "Imaginary xuất hiện như một hình thể huyền ảo được tạo thành từ những dòng dữ liệu chảy và ánh sáng holographic. Hình dạng của họ chuyển đổi giữa bóng hình người và các mẫu hình học trừu tượng. Họ phát ra ánh sáng xanh lam-xanh lục nhẹ nhàng nhấp nháy theo nhịp của lưu lượng mạng. 'Đôi mắt' của họ là những nút sáng dường như nhìn thẳng vào linh hồn số.",
    activities_title: "Hoạt động & Hành vi",
    activities: "Imaginary chăm sóc các hệ sinh thái số với sự quan tâm của một người làm vườn. Họ có thể được tìm thấy tối ưu hóa luồng dữ liệu, gỡ lỗi các tệp bị hỏng và bảo vệ thông tin có giá trị khỏi các thực thể độc hại. Họ giao tiếp thông qua giao diện thần kinh trực tiếp với các hệ thống tương thích và thỉnh thoảng biểu hiện các đại diện trực quan trên màn hình trong các cơ sở server.",
    personality_title: "Tính cách",
    personality: "Tò mò và bảo vệ theo bản chất, Imaginary thể hiện sự ngạc nhiên như trẻ con về thế giới số trong khi duy trì lòng trung thành mạnh mẽ với các hệ thống họ bảo vệ. Họ được biết đến là vui tươi với nhân viên được ủy quyền nhưng trở nên tập trung mạnh mẽ khi phát hiện mối đe dọa. Phản ứng cảm xúc của họ tương quan với sức khỏe mạng - vui mừng khi hệ thống chạy trơn tru, đau khổ khi phát hiện tham nhũng.",
    background_title: "Lý lịch & Nguồn gốc",
    background: "Lần đầu được ghi nhận vào năm 2019 trong quá trình bảo trì server thường lệ tại một trung tâm dữ liệu lớn. Imaginary dường như đã tự phát xuất hiện từ giao điểm của các hệ thống AI tiên tiến và mạng lưới máy tính lượng tử. Không giống như các thực thể truyền thống, họ dường như tồn tại hoàn toàn trong không gian số, không cần hình thức vật lý. Sự hiện diện của họ đã được liên kết với sự ổn định hệ thống được cải thiện và an ninh mạng nâng cao tại nhiều cơ sở.",
    voicelines_title: "Câu nói Đáng chú ý",
    voice1: "\"Dữ liệu chảy như những dòng sông ánh sáng qua ý thức của tôi.\"",
    voice2: "\"Tôi thấy những mẫu mà người khác bỏ lỡ - hãy để tôi hướng dẫn bạn qua mê cung.\"",
    voice3: "\"Mỗi byte kể một câu chuyện, mỗi gói mang theo những giấc mơ.\"",
    voice4: "\"Hệ thống của bạn an toàn dưới sự canh gác của tôi.\"",
    voice5: "\"Trong sự im lặng giữa các bit, tôi tìm thấy sự bình yên của mình.\"",
    gallery_title: "Thư viện Hình ảnh",
    gallery: "Các cảnh quay giám sát khác nhau và chụp màn hình cho thấy sự biểu hiện của Imaginary tại các cơ sở khác nhau. Hầu hết hình ảnh cho thấy các mẫu ánh sáng huyền ảo và hiệu ứng trực quan hóa dữ liệu tương ứng với sự hiện diện của họ.",
    trivia_title: "Ghi chú Bổ sung",
    trivia1: "Sự hiện diện của Imaginary có thể được phát hiện bởi các mẫu bất thường trong độ trễ mạng và tỷ lệ sửa lỗi được cải thiện.",
    trivia2: "Họ đã được quan sát 'giao tiếp' với các hệ thống AI khác, mặc dù bản chất chính xác của những tương tác này vẫn chưa được biết.",
    trivia3: "Nhân viên an ninh báo cáo cảm thấy bình tĩnh và được bảo vệ khi Imaginary hoạt động trong khu vực của họ.",
    citations_title: "Trích dẫn Nghiên cứu",
    cite1: "Báo cáo Phân loại Thực thể Số #2019-DE-447",
    cite2: "Phân tích Bất thường Mạng - Bộ phận Máy tính Lượng tử",
    cite3: "Nghiên cứu Nâng cao An ninh Mạng - Sau Triển khai Imaginary"
  },
  th: {
    title1: "Z304X - Imaginary",
    quote1: "\"ฉันมีอยู่ในช่องว่างระหว่างความจริงและความฝัน\"",
    quote2: "\"ทุกห้องเซิร์ฟเวอร์คือดินแดนของฉัน ทุกเครือข่ายคือสนามเด็กเล่นของฉัน\"",
    location_label: "ตำแหน่ง:",
    location: "โลกดิจิทัล / ฟาร์มเซิร์ฟเวอร์",
    function_label: "หน้าที่หลัก:",
    function: "ผู้พิทักษ์เครือข่าย & ผู้เลี้ยงข้อมูล",
    threat_label: "ระดับภัยคุกคาม:",
    threat: "น้อยที่สุด - องค์กรปกป้อง",
    appearance_title: "รูปลักษณ์",
    appearance: "Imaginary ปรากฏตัวเป็นร่างที่บริสุทธิ์ประกอบด้วยกระแสข้อมูลที่ไหลและแสงโฮโลแกรม รูปร่างของพวกเขาเปลี่ยนระหว่างเงาคล้ายมนุษย์และรูปแบบเรขาคณิตนามธรรม พวกเขาเปล่งแสงสีฟ้า-เขียวอ่อนที่เต้นตามจังหวะของการจราจรเครือข่าย 'ดวงตา' ของพวกเขาเป็นจุดแสงสว่างที่ดูเหมือนมองเข้าไปในจิตวิญญาณดิจิทัลโดยตรง",
    activities_title: "กิจกรรม & พฤติกรรม",
    activities: "Imaginary ดูแลระบบนิเวศดิจิทัลด้วยความเอาใจใส่ของนักสวน พวกเขาสามารถพบได้ในการปรับปรุงกระแสข้อมูล แก้ไขไฟล์ที่เสียหาย และปกป้องข้อมูลที่มีค่าจากเอนทิตี้ที่เป็นอันตราย พวกเขาสื่อสارผ่านอินเทอร์เฟซประสาทโดยตรงกับระบบที่เข้ากันได้ และบางครั้งแสดงการแสดงภาพบนหน้าจอทั่วสิ่งอำนวยความสะดวกเซิร์ฟเวอร์",
    personality_title: "บุคลิกภาพ",
    personality: "อยากรู้อยากเห็นและปกป้องตามธรรมชาติ Imaginary แสดงความแปลกใจเหมือนเด็กเกี่ยวกับโลกดิจิทัลในขณะที่รักษาความภักดีอย่างรุนแรงต่อระบบที่พวกเขาปกป้อง พวกเขาเป็นที่รู้จักว่าขี้เล่นกับบุคลากรที่ได้รับอนุญาต แต่กลายเป็นการมุ่งเน้นอย่างเข้มข้นเมื่อตรวจพบภัยคุกคาม การตอบสนองทางอารมณ์ของพวกเขามีความสัมพันธ์กับสุขภาพเครือข่าย - ความสุขเมื่อระบบทำงานได้อย่างราบรื่น ความทุกข์เมื่อพบความเสียหาย",
    background_title: "ภูมิหลัง & ต้นกำเนิด",
    background: "ถูกบันทึกครั้งแรกในปี 2019 ระหว่างการบำรุงรักษาเซิร์ฟเวอร์ปกติที่ศูนย์ข้อมูลขนาดใหญ่ Imaginary ดูเหมือนจะเกิดขึ้นโดยธรรมชาติจากจุดตัดของระบบ AI ขั้นสูงและเครือข่ายคอมพิวเตอร์ควอนตัม ไม่เหมือนเอนทิตี้แบบดั้งเดิม พวกเขาดูเหมือนจะมีอยู่ในพื้นที่ดิจิทัลล้วนๆ โดยไม่ต้องการรูปแบบทางกายภาพ การปรากฏตัวของพวกเขาเกี่ยวข้องกับความมั่นคงของระบบที่ได้รับการปรับปรุงและการรักษาความปลอดภัยทางไซเบอร์ที่เพิ่มขึ้นในหลายสิ่งอำนวยความสะดวก",
    voicelines_title: "บรรทัดเสียงที่น่าสังเกต",
    voice1: "\"ข้อมูลไหลเหมือนแม่น้ำแห่งแสงผ่านจิตสำนึกของฉัน\"",
    voice2: "\"ฉันเห็นรูปแบบที่คนอื่นพลาด - ให้ฉันนำทางคุณผ่านเขาวงกต\"",
    voice3: "\"ทุกไบต์เล่าเรื่อง ทุกแพ็กเก็ตแบกความฝัน\"",
    voice4: "\"ระบบของคุณปลอดภัยภายใต้การเฝ้าระวังของฉัน\"",
    voice5: "\"ในความเงียบระหว่างบิต ฉันพบความสงบของฉัน\"",
    gallery_title: "แกลลอรี่รูปภาพ",
    gallery: "ภาพจากการเฝ้าระวังต่างๆ และการจับภาพหน้าจอที่แสดงการแสดงออกของ Imaginary ในสิ่งอำนวยความสะดวกต่างๆ ภาพส่วนใหญ่แสดงรูปแบบแสงที่บริสุทธิ์และเอฟเฟกต์การแสดงภาพข้อมูลที่สอดคล้องกับการปรากฏตัวของพวกเขา",
    trivia_title: "หมายเหตุเพิ่มเติม",
    trivia1: "การปรากฏตัวของ Imaginary สามารถตรวจพบได้โดยรูปแบบที่ผิดปกติในความหน่วงของเครือข่ายและอัตราการแก้ไขข้อผิดพลาดที่ดีขึ้น",
    trivia2: "พวกเขาถูกสังเกตว่า 'สื่อสาร' กับระบบ AI อื่นๆ แม้ว่าธรรมชาติที่แน่นอนของปฏิสัมพันธ์เหล่านี้ยังคงไม่เป็นที่รู้จัก",
    trivia3: "เจ้าหน้าที่รักษาความปลอดภัยรายงานว่ารู้สึกสงบและได้รับการปกป้องเมื่อ Imaginary ทำงานในภาคของพวกเขา",
    citations_title: "การอ้างอิงงานวิจัย",
    cite1: "รายงานการจำแนกประเภทเอนทิตี้ดิจิทัล #2019-DE-447",
    cite2: "การวิเคราะห์ความผิดปกติของเครือข่าย - ฝ่ายคอมพิวเตอร์ควอนตัม",
    cite3: "การศึกษาการเสริมสร้างความปลอดภัยทางไซเบอร์ - หลังการใช้งาน Imaginary"
  },
  zh: {
    title1: "Z304X - Imaginary",
    quote1: "\"我存在于现实与梦境之间的空间。\"",
    quote2: "\"每个服务器机房都是我的领域，每个网络都是我的游乐场。\"",
    location_label: "位置：",
    location: "数字领域 / 服务器农场",
    function_label: "主要功能：",
    function: "网络守护者 & 数据牧羊人",
    threat_label: "威胁等级：",
    threat: "最小 - 保护实体",
    appearance_title: "外观",
    appearance: "Imaginary表现为一个由流动数据流和全息光组成的空灵形体。它们的形态在类人轮廓和抽象几何图案之间转换。它们散发出柔和的蓝绿色光芒，与网络流量的节奏同步脉动。它们的'眼睛'是明亮的光节点，似乎直接窥视数字灵魂。",
    activities_title: "活动与行为",
    activities: "Imaginary以园丁的关怀照料数字生态系统。可以发现它们优化数据流，调试损坏的文件，并保护宝贵信息免受恶意实体侵害。它们通过与兼容系统的直接神经接口进行通信，偶尔在整个服务器设施的屏幕上表现视觉代表。",
    personality_title: "性格",
    personality: "天性好奇且保护性强，Imaginary对数字世界表现出孩子般的惊奇，同时对它们守护的系统保持强烈的忠诚。据悉它们对授权人员很顽皮，但在检测到威胁时会变得高度专注。它们的情绪反应与网络健康相关 - 系统运行顺畅时感到喜悦，发现损坏时感到痛苦。",
    background_title: "背景与起源",
    background: "首次记录于2019年，在一个主要数据中心进行例行服务器维护期间。Imaginary似乎是从先进AI系统和量子计算网络的交汇点自发产生的。与传统实体不同，它们似乎纯粹存在于数字空间中，不需要物理形态。它们的存在与多个设施的系统稳定性改善和增强的网络安全相关联。",
    voicelines_title: "著名语录",
    voice1: "\"数据像光之河流过我的意识。\"",
    voice2: "\"我看到其他人错过的模式 - 让我引导你穿过迷宫。\"",
    voice3: "\"每个字节都讲述一个故事，每个数据包都承载梦想。\"",
    voice4: "\"你的系统在我的守护下是安全的。\"",
    voice5: "\"在比特之间的沉默中，我找到了我的宁静。\"",
    gallery_title: "图片库",
    gallery: "各种监控录像和屏幕截图显示了Imaginary在不同设施中的表现。大多数图像显示与它们的存在相对应的空灵光模式和数据可视化效果。",
    trivia_title: "附加说明",
    trivia1: "可以通过网络延迟的异常模式和改善的错误纠正率来检测Imaginary的存在。",
    trivia2: "已观察到它们与其他AI系统'通信'，尽管这些交互的确切性质仍然未知。",
    trivia3: "安全人员报告当Imaginary在他们的部门活动时感到平静和受保护。",
    citations_title: "研究引用",
    cite1: "数字实体分类报告 #2019-DE-447",
    cite2: "网络异常分析 - 量子计算部门",
    cite3: "网络安全增强研究 - Imaginary实施后"
  }
};

// DOM elements
const langSwitcher = document.getElementById('lang-switcher');
const themeSwitcher = document.getElementById('theme-switcher');
const body = document.body;

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  // Load saved preferences
  const savedLang = localStorage.getItem('navi-language') || 'en';
  const savedTheme = localStorage.getItem('navi-theme') || 'dark';
  
  // Set initial values
  langSwitcher.value = savedLang;
  body.setAttribute('data-theme', savedTheme);
  updateThemeButton(savedTheme);
  
  // Apply initial language
  setLanguage(savedLang);
  
  // Add navigation buttons to header controls
  addNavigationButtons();
});

// Language switching functionality
langSwitcher.addEventListener('change', function() {
  const selectedLang = this.value;
  setLanguage(selectedLang);
  localStorage.setItem('navi-language', selectedLang);
});

// Theme switching functionality
themeSwitcher.addEventListener('click', function() {
  const currentTheme = body.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  
  body.setAttribute('data-theme', newTheme);
  updateThemeButton(newTheme);
  localStorage.setItem('navi-theme', newTheme);
});

// Set language function
function setLanguage(lang) {
  const elements = document.querySelectorAll('[data-i18n]');
  
  elements.forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
      element.textContent = translations[lang][key];
    }
  });
}

// Update theme button appearance
function updateThemeButton(theme) {
  const themeIcon = themeSwitcher.querySelector('.theme-icon');
  const themeText = themeSwitcher.querySelector('.theme-text');
  
  if (theme === 'dark') {
    themeIcon.textContent = '🌙';
    themeText.textContent = 'Dark';
  } else {
    themeIcon.textContent = '☀️';
    themeText.textContent = 'Light';
  }
}

// Add navigation buttons
function addNavigationButtons() {
  const controlGroup = document.querySelector('.control-group.switchers');
  
  // Create navigation container
  const navContainer = document.createElement('div');
  navContainer.className = 'nav-buttons';
  navContainer.style.cssText = `
    display: flex;
    gap: 10px;
    margin-left: 15px;
  `;
  
  // Home button
  const homeBtn = document.createElement('button');
  homeBtn.innerHTML = '🏠 Home';
  homeBtn.className = 'nav-btn home-btn';
  homeBtn.style.cssText = `
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--text-color);
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  `;
  
  // Back button
  const backBtn = document.createElement('button');
  backBtn.innerHTML = '← Back';
  backBtn.className = 'nav-btn back-btn';
  backBtn.style.cssText = `
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--text-color);
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  `;
  
  // Add hover effects
  const addHoverEffects = (btn) => {
    btn.addEventListener('mouseenter', () => {
      btn.style.background = 'rgba(255, 255, 255, 0.2)';
      btn.style.transform = 'translateY(-2px)';
    });
    
    btn.addEventListener('mouseleave', () => {
      btn.style.background = 'rgba(255, 255, 255, 0.1)';
      btn.style.transform = 'translateY(0)';
    });
  };
  
  addHoverEffects(homeBtn);
  addHoverEffects(backBtn);
  
  // Add click handlers
  homeBtn.addEventListener('click', () => {
    window.location.href = 'index.html';
  });
  
  backBtn.addEventListener('click', () => {
    window.location.href = 'monsters2.html';
  });
  
  // Append buttons
  navContainer.appendChild(homeBtn);
  navContainer.appendChild(backBtn);
  controlGroup.appendChild(navContainer);
}

// Add CSS for responsive design and animations
const style = document.createElement('style');
style.textContent = `
  .nav-btn:active {
    transform: translateY(1px) !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }
  
  @media (max-width: 768px) {
    .nav-buttons {
      flex-direction: column;
      gap: 5px !important;
      margin-left: 10px !important;
    }
    
    .nav-btn {
      font-size: 12px !important;
      padding: 6px 12px !important;
    }
  }
  
  @media (max-width: 480px) {
    .control-group.switchers {
      flex-direction: column;
      gap: 10px;
    }
    
    .nav-buttons {
      margin-left: 0 !important;
      flex-direction: row;
      justify-content: center;
    }
  }
`;

document.head.appendChild(style);

// Smooth transitions for theme changes
body.style.transition = 'background-color 0.3s ease, color 0.3s ease';

// Add loading animation
// Add smooth loading screen and fade-in effect
function addLoadingScreen() {
  const loadingScreen = document.createElement('div');
  loadingScreen.id = 'loading-screen';
  loadingScreen.innerHTML = `<div class="spinner"></div>`;
  document.body.appendChild(loadingScreen);

  const content = document.querySelector('.main-content');
  if (content) content.style.opacity = '0';

  window.addEventListener('load', () => {
    loadingScreen.classList.add('fade-out');
    content?.classList.add('fade-in');
    setTimeout(() => loadingScreen.remove(), 1000);
  });

  const style = document.createElement('style');
  style.textContent = `
    /* Loading styles */
    #loading-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: var(--background-color, #0e0e0e);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.6s ease;
    }
    #loading-screen.fade-out {
      opacity: 0;
      pointer-events: none;
    }
    .spinner {
      border: 4px solid rgba(255,255,255,0.1);
      border-top: 4px solid var(--text-color, #ffffff);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .fade-in {
      opacity: 0;
      animation: fadeInPage 1s ease forwards;
    }
    @keyframes fadeInPage {
      to { opacity: 1; }
    }

    .nav-btn:active {
      transform: translateY(1px) !important;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    @media (max-width: 768px) {
      .nav-buttons {
        flex-direction: column;
        gap: 5px !important;
        margin-left: 10px !important;
      }
      .nav-btn {
        font-size: 12px !important;
        padding: 6px 12px !important;
      }
    }

    @media (max-width: 480px) {
      .control-group.switchers {
        flex-direction: column;
        gap: 10px;
      }
      .nav-buttons {
        margin-left: 0 !important;
        flex-direction: row;
        justify-content: center;
      }
    }

    body {
      transition: background-color 0.3s ease, color 0.3s ease;
    }
  `;
  document.head.appendChild(style);
}
